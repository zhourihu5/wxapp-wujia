<view class="container">
    <cu-custom bgColor="titlebar-white" isBack="{{false}}">
        <view slot="backText">返回</view>
        <view slot="content">订单</view>
    </cu-custom>
    <van-tabs class="tab-layout"
              custom-class="custom-tabs"
              nav-class="tab-nav"
              tab-class="tab-custom"
              border="{{false}}"
              line-class="tab-line"
              color="rgba(255,155,29,1)"
              lineWidth="17" swipeable swipeThreshold="5"
              active="{{active}}"
              bind:change="onChangeTab"
    >
        <van-tab
                wx:for="{{ tabs }}"
                wx:for-item="tab"
                wx:for-index="tabIndex"
                title="{{tab.title}}"
                custom-class="custom-tab">
            <!--                <view class="list">-->
            <!--                    todo 如果不需要下拉刷新替换为  scroll-view-->
            <scroll-view scroll-y class="scroll-view-order" style="top: calc( {{CustomBar}}px + 84rpx )"
                         lower-threshold="{{lowerThreshold}}"
                         upper-threshold="0"
                         bindscrolltoupper='scrolltoupper'
                         bindscrolltolower='scrolltolower'
            >
                <block wx:for="{{tab.data}}" wx:for-item="item" wx:key="">
<!--                <block wx:for="{{10}}" wx:for-item="item" wx:key="">-->
                    <view class="item-content {{index==0?'p-t-20':''}}">
                        <view class="order-container" url="/pages/order/orderDetail/index"
                                   hover-class="navigator-hover"
                                   open-type="navigateTo"
                                   bindtap="itemClicked"
                                    data-index="{{index}}">
                            <!--                <view class="round-container order-container">-->
                            <view class="top-item">
                                <text wx:if="{{item.status=='1'}}">付款剩余时间：</text>
                                <text wx:elif="{{item.status=='2'}}">送货人：葫芦娃</text>
                                <text wx:elif="{{item.status=='3'}}">收货时间：2019.06.25 21:02:20</text>
                                <text wx:else >过期时间：{{item.pay_end_date}}</text>


                                <text wx:if="{{item.status=='1'}}" class="sysj">{{item.remainTime}}</text>
                                <view class="flex-1"></view>
                                <text wx:if="{{item.status=='1'}}"  class="dfk">待付款</text>
                                <text wx:elif="{{item.status=='2'}}"  class="dfk">待收货</text>
                                <text wx:elif="{{item.status=='3'}}"  class="dfk">已收货</text>
                                <text wx:else  class="ygq">已过期</text>
                            </view>
                            <view class="order-middle-item">
                                <image class="order-image" src="/images/tab_my.png"/>
                                <view class="order-text">
                                    <view class="{{item.status=='4'?'order-name-ygq':'order-name'}} ">{{item.activity.title}}</view>
                                    <view class="order-price">
                                        <text class="{{item.status=='4'?'money-ygq':'money'}}">￥</text>
                                        <text class="{{item.status=='4'?'price-now-ygq':'price-now'}}">{{item.realPrice}}</text>
                                        <text wx:if="{{false}}" class="line-through price-old">￥{{item.commodity.price}}</text>
                                    </view>
                                </view>

                            </view>
                            <view class="btn-wraper">
                                <view class="left-empty"></view>
                                <text wx:if="{{item.status=='1'}}" class="pay-right-now" bindtap="toPay" data-id="{{item.id}}">立即付款</text>
                                <text wx:elif="{{item.status=='2'}}" class="lxshr" bindtap="askDeliver" data-phone="{{item.deliveryPhone}}">联系送货人</text>
                                <text wx:else class="go-stroll" bindtap="goStroll">去逛逛</text>
                            </view>

                            <!--                </view>-->
                        </view>
                    </view>
                </block>
                <view wx:if="{{tab.reachBottom&&tab.isLoading}}" class="cu-load wj-loading {{isLoading?'loading':'over'}}"></view>
                <view wx:if="{{tab.isOver&&tab.data.length<=0}}" class="empty-container">
                    <image class="empty-img" src="/images/empty_order.png"></image>
                    <view class="empty-text">您还没有订单哦～</view>
                </view>
            </scroll-view>
            <!--                </view>-->


        </van-tab>
    </van-tabs>
</view>
<view class="cu-modal full-screen  {{modalName=='ModalCallPhone'?'show':''}}">
    <view class="cu-dialog dialog relative">
        <view class="dialog-title">{{callPhone}}</view>
        <view class="dialog-action">
            <view class="dialog-button" bindtap="hideModal">取消</view>
            <view class="dialog-button no-border" bindtap="makePhoneCall" data-phone="{{callPhone}}">拨打</view>
        </view>
    </view>
</view>